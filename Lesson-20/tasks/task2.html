<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
</head>
<body>
   <h1>Задача 2</h1>
   <p>
      Створити службове авто (водій, марка, номер). Створити клас таким чином, щоб можна було створити тільки один екземпляр цього класу.
   </p> 
   <script>
      
      //1.Вводимо необхідні дані
      let confirmMessage = confirm("Let's run the task? ")
      if (confirmMessage) {

         class CompanyCar {

            //змінні статік належать одному класу, а не всім іншим обєктам
            //singleton - єдиний екзкмляр - корисно коли з базою даних  повинен бути зв"язаний лише один об"єкт
            static createOneTime;

            #driver;
            #brand;
            #identifier;
            
            constructor (driver, brand, identifier) {
               if(CompanyCar.createOneTime) {
                  return CompanyCar.createOneTime;
               }
               this.Driver = driver;
               this.Brand = brand;
               this.Identifier = identifier;
               CompanyCar.createOneTime = this;
            }

            get Driver() {
               return this.#driver;
            }
            get Brand() {
               return this.#brand;
            }
            get Identifier() {
               return this.#identifier;
            }

            set Driver(name) {
               if(name === '') throw new Error('Введіть ім\'я водія');
               this.#driver = name; 
            }

            set Brand(title) {
               if(title === '') throw new Error('Введіть марку автомобіля');
               this.#brand = title;
            }

            set Identifier(ident) {
               if (ident === '') throw new Error('Введіть номер автомобіля');
               this.#identifier = ident;
            }

            toString() {
               return `Службове авто ${this.Brand} з номером ${this.Identifier}, відповідальний водій - ${this.Driver} <br>`
            }
         } 
         
         
         try {
            const car1 = new CompanyCar('Олег Шевченко', 'BMW', 'qw3456aa');
            document.writeln(car1);
            const car2 = new CompanyCar('Микола Мозговий', 'Renault', 'qw1111pp');
            document.writeln(car1);
         } catch (error) {
            document.writeln(error.message);
         }


         // class CompanyCar {
         //    // Статична змінна для збереження єдиного екземпляра
         //    private static instance: CompanyCar | null = null;

         //    // Приватні поля класу (оголошені через TypeScript синтаксис)
         //    private _driver: string;
         //    private _brand: string;
         //    private _identifier: string;

         //    // Конструктор з перевіркою Singleton
         //    constructor(driver: string, brand: string, identifier: string) {
         //       if (CompanyCar.instance) {
         //          return CompanyCar.instance;
         //       }

         //       this.Driver = driver;
         //       this.Brand = brand;
         //       this.Identifier = identifier;

         //       CompanyCar.instance = this;
         //    }

         //    // Геттер для водія
         //    public get Driver(): string {
         //       return this._driver;
         //    }

         //    // Сеттер для водія з валідацією
         //    public set Driver(name: string) {
         //       if (!name) throw new Error("Введіть ім'я водія");
         //       this._driver = name;
         //    }

         //    public get Brand(): string {
         //       return this._brand;
         //    }

         //    public set Brand(title: string) {
         //       if (!title) throw new Error("Введіть марку автомобіля");
         //       this._brand = title;
         //    }

         //    public get Identifier(): string {
         //       return this._identifier;
         //    }

         //    public set Identifier(id: string) {
         //       if (!id) throw new Error("Введіть номер автомобіля");
         //       this._identifier = id;
         //    }

         //    // Метод для виводу опису авто
         //    public toString(): string {
         //       return `Службове авто ${this.Brand} з номером ${this.Identifier}, відповідальний водій - ${this.Driver}<br>`;
         //    }
         //    }
         
      }
   </script>
</body>
</html>